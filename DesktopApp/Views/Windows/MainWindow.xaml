<Window x:Class="DesktopApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"       
        xmlns:uc="clr-namespace:DesktopApp.UserControllers"
        xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
        Title="MainWindow" Height="450" Width="800">
    <DockPanel x:Name="praparent">
        <Menu DockPanel.Dock="Top" 
            Height="25" 
            VerticalAlignment="Top"
            Panel.ZIndex="2">
            <MenuItem 
                Header="Map">
                <MenuItem 
                    Header="Create new" 
                    Command="{Binding ShowCreateMapDialogCommand}">
                </MenuItem>
                <MenuItem 
                    Header="Select existing" >
                </MenuItem>
            </MenuItem>
        </Menu>
        <DockPanel DockPanel.Dock="Right" Width="130">
            <StackPanel>
                <StackPanel.Resources>
                    <dxmvvm:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
                </StackPanel.Resources>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition  />
                        <RowDefinition  />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Button
                        Command ="{Binding AddNewCityCommand}"
                        Grid.Column="0"
                        VerticalAlignment="Top"
                        Content="Add a city">
                    </Button>
                    <Button                    
                        Grid.Column="1"
                        VerticalAlignment="Top"
                        Content="Add a bond">
                    </Button>
                    <Button                    
                        Grid.Row="1"
                        Grid.ColumnSpan="2"
                        Content ="Calculate optimal route">
                    </Button>
                </Grid>
                <Grid 
                    Visibility="{Binding IsAbleToCreateCity, 
                    Converter={StaticResource BooleanToVisibilityConverter}}">
                    <Grid.RowDefinitions>
                        <RowDefinition  />
                        <RowDefinition  />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <Label
                        Content="City Name: "
                        Target="{Binding cityName}"/>

                    <TextBox DataContext="{Binding MapViewModel}"
                        Text="{Binding SelectedCity.Name}"
                        Grid.Column="1"
                        Name="cityName"/>

                    <Button
                        Grid.Row="1"
                        Content="Create"
                        Command="{Binding CreateNewCityCommand}"></Button>
                    <Button 
                        Grid.Column="1"
                        Grid.Row="1"
                        Content="Delete"></Button>
                </Grid>

            </StackPanel>

        </DockPanel>
        <DockPanel 
            DockPanel.Dock="Top">
            <StatusBar DockPanel.Dock="Top"
                       Panel.ZIndex="2">
                <StatusBarItem>
                    <TextBlock Name="stateLine"
                               Text="{Binding StatusBar}"/>
                </StatusBarItem>
            </StatusBar>
            <uc:MapControl OffsetValue="{Binding OffsetValue, Mode=TwoWay}"
                           ScaleValue="{Binding ScaleValue,Mode=TwoWay}"
                           MapImageSource="{Binding MapImageSource}"
                           TransformPosition="{Binding TransformPosition,Mode=TwoWay}"
                           ImageHeight="{Binding ImageHeight, Mode=TwoWay}"
                           ImageWidth="{Binding ImageWidth,Mode=TwoWay}"
                           Offset="{Binding Offset, Mode=TwoWay}"
                           PPW="{Binding PPW, Mode=TwoWay}"
                           PPH="{Binding PPH, Mode=TwoWay}"
                           CityCollection ="{Binding MapViewModel.CityCollection, Mode=TwoWay, IsAsync=True}"
                           SelectedCity="{Binding MapViewModel.SelectedCity, Mode=TwoWay}"                     
                           IsAbleToCreateCity="{Binding IsAbleToCreateCity, Mode=TwoWay}"
                           IsAbleToSetCity="{Binding IsAbleToSetCity, Mode=TwoWay}"
                           SettingsMap="{Binding MapViewModel.SettingsMap, Mode=TwoWay}"
                           PosX="{Binding PositionViewModel.PanelX, Mode=TwoWay}"
                           PosY="{Binding PositionViewModel.PanelY, Mode=TwoWay}"/>
        </DockPanel>
    </DockPanel>
    
</Window>
